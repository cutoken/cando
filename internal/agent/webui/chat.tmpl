{{define "chat"}}
<main class="conversation-panel">
  <!-- Split Pane Container -->
  <div id="splitPaneContainer" class="split-pane-container">
    <!-- Editor Pane (left) -->
    <div id="editorPane" class="pane editor-pane hidden">
      <button id="collapseEditorBtn" class="pane-icon-btn editor-collapse-btn" title="Collapse Editor">
        <i data-lucide="panel-left-close"></i>
      </button>
      <div id="editorContainer" class="editor-container"></div>
    </div>

    <!-- Pane Resize Handle -->
    <div id="paneResizeHandle" class="pane-resize-handle hidden"></div>

    <!-- Chat Pane (right) -->
    <div id="chatPane" class="pane chat-pane">
      <button id="expandEditorBtn" class="pane-icon-btn chat-expand-btn hidden" title="Show Editor">
        <i data-lucide="panel-left-open"></i>
      </button>
      <button id="collapseChatBtn" class="pane-icon-btn chat-collapse-btn" title="Collapse Chat">
        <i data-lucide="panel-right-close"></i>
      </button>
      <section id="messages" class="message-feed"></section>
      <div id="thinkingIndicator" class="thinking-indicator">
        <div class="thinking-content">
          <span class="thinking-label">Cando</span>
          <div class="thinking-dots">
            <span></span><span></span><span></span>
          </div>
          <span class="thinking-status" id="thinkingStatus"></span>
          <div class="thinking-plan" id="thinkingPlan">
            <span class="plan-summary-text" id="planSummaryText"></span>
            <div id="planDropdown" class="plan-dropdown hidden">
              <div class="plan-dropdown-header">
                <span id="planDropdownTitle">Plan</span>
                <button id="closePlanDropdown" class="icon-btn-sm">
                  <i data-lucide="x"></i>
                </button>
              </div>
              <div id="planDropdownSteps" class="plan-steps-list"></div>
            </div>
          </div>
          <span class="thinking-model-info" id="thinkingModelInfo"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Expand Chat Button (shown when chat collapsed) -->
  <button id="expandChatBtn" class="expand-chat-btn hidden" title="Show Chat">
    <i data-lucide="message-circle"></i>
  </button>
</main>
{{end}}
