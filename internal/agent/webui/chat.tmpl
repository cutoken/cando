{{define "chat"}}
<main class="conversation-panel">
  <!-- Message Toolbar -->
  <div class="message-toolbar">
    <!-- Project Picker: [ðŸ“ name â–¼] -->
    <div class="project-picker-container">
      <button id="projectPickerBtn" class="project-picker-btn" title="Switch Project">
        <i data-lucide="folder" class="picker-icon"></i>
        <span id="currentProjectName" class="picker-label">No Project</span>
        <i data-lucide="chevron-down" class="chevron"></i>
      </button>
      <!-- Project Dropdown Menu -->
      <div id="projectMenu" class="project-dropdown-menu hidden">
        <div class="project-menu-section">
          <div id="projectMenuList" class="project-menu-items"></div>
        </div>
        <div class="project-menu-section project-menu-actions">
          <button id="newProjectMenuBtn" class="project-menu-action">
            <i data-lucide="folder-plus"></i>
            <span>New Project</span>
          </button>
          <button id="openFolderMenuBtn" class="project-menu-action">
            <i data-lucide="folder-open"></i>
            <span>Open Project</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Chat Controls: [ ðŸ’¬ chat-1 â–¼ | + ] -->
    <div class="chat-controls-group">
      <div class="chat-picker-container">
        <button id="chatPickerBtn" class="chat-picker-btn" title="Switch Chat">
          <i data-lucide="message-circle" class="picker-icon"></i>
          <span id="currentChatLabel" class="picker-label">chat-1</span>
          <i data-lucide="chevron-down" class="chevron"></i>
        </button>
        <!-- Chat Dropdown Menu -->
        <div id="chatMenu" class="chat-dropdown-menu hidden">
          <div id="chatMenuList" class="chat-menu-items"></div>
        </div>
      </div>
      <div class="chat-controls-divider"></div>
      <button id="newChatBtn" class="new-chat-btn" title="New Chat">
        <i data-lucide="plus"></i>
      </button>
    </div>

    <div id="messageBanner" class="feed-banner hidden"></div>
  </div>

  <section id="messages" class="message-feed"></section>

  <div id="thinkingIndicator" class="thinking-indicator">
    <div class="thinking-content">
      <span class="thinking-label">Cando</span>
      <div class="thinking-dots">
        <span></span><span></span><span></span>
      </div>
      <span class="thinking-status" id="thinkingStatus"></span>
      <div class="thinking-plan" id="thinkingPlan">
        <span class="plan-summary-text" id="planSummaryText"></span>
        <!-- Plan Dropdown -->
        <div id="planDropdown" class="plan-dropdown hidden">
          <div class="plan-dropdown-header">
            <span id="planDropdownTitle">Plan</span>
            <button id="closePlanDropdown" class="icon-btn-sm">
              <i data-lucide="x"></i>
            </button>
          </div>
          <div id="planDropdownSteps" class="plan-steps-list"></div>
        </div>
      </div>
      <span class="thinking-model-info" id="thinkingModelInfo"></span>
    </div>
  </div>

  <form id="promptForm" class="composer">
    <div class="input-wrapper">
      <button type="button" id="helpBtn" class="icon-btn help-btn" title="Help">
        <i data-lucide="help-circle"></i>
      </button>
      <button type="button" id="settingsBtn" class="icon-btn settings-btn" title="Settings">
        <i data-lucide="settings"></i>
      </button>
      <textarea id="promptInput" placeholder="Ask Cando anythingâ€¦ (Enter to send, Shift+Enter for new line)" rows="1"></textarea>
      <button type="button" id="cancelBtn" class="ghost stop-btn">Cancel</button>
      <button type="submit" id="sendBtn" class="primary send-btn">Send</button>
    </div>
  </form>
</main>
{{end}}
